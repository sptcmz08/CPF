<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8">
  <title>‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå</title>

  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <style>
    * {
      box-sizing: border-box;
    }

    .header {
      font-size: 16px;
    }

    body {
      font-family: 'Sarabun', sans-serif;
      background: #f4f6f8;
      margin: 0;
    }

    .container {
      font-size: 24px;
    }

    /* ================= HEADER ================= */
    .header {
      width: 100%;
      background: #ffffff;
      border-bottom: 1px solid #e0e0e0;
      padding: 14px 40px;

      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 20px;
      font-weight: 700;
      color: #5b2c83;
    }

    .header-left i {
      font-size: 26px;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 16px;
      font-size: 14px;
    }

    .logout-btn {
      background: #ff6b6b;
      color: #fff;
      padding: 8px 16px;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 600;
    }

    .label-bold {
      font-weight: 700;
    }

    /* ===== ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á label ‡∏Å‡∏±‡∏ö input ===== */
    .q-row,
    .doctor-row,
    .line-group {
      margin-bottom: 22px;
    }

    label {
      display: block;
      margin-bottom: 10px;
    }

    /* ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô */
    input,
    textarea,
    select {
      margin-top: 6px;
    }

    /* ===== ‡∏Ç‡∏¢‡∏≤‡∏¢ radio button ===== */
    .option-row input[type="radio"] {
      transform: scale(1.6);
      margin-right: 6px;
    }

    .option-row label {
      font-size: 22px;
    }

    .paper>a.save-btn {
      text-decoration: none;
    }

    .paper>a.save-btn:hover {
      text-decoration: none;
    }

    /* ================= BASE ================= */
    body {
      font-family: 'Sarabun', sans-serif;
      font-size: 24px;
      background: #f4f6f8;
      margin: 0;

    }

    /* ================= ‡∏Å‡∏£‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏Å (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå) ================= */
    .paper {
      position: relative;
      max-width: 1500px;
      margin: 40px auto;
      background: #fff;
      padding: 40px;
      border-radius: 14px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25);
      box-sizing: border-box;
    }

    /* ================= ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ ================= */
    h2 {
      text-align: center;
      margin-top: 10px;
      margin-bottom: 30px;
      font-size: 32px;
      font-weight: 700;
    }

    /* ================= ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π ================= */
    .paper>a.save-btn {
      position: absolute;
      top: 15px;
      left: 15px;
      background: #28a745;
      color: #fff;
      padding: 10px 18px;
      border-radius: 8px;
      font-size: 18px;
      font-weight: 600;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    }

    .paper>a.save-btn:hover {
      background: #218838;
    }

    /* ================= ‡πÅ‡∏ñ‡∏ö‡∏™‡∏•‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô ================= */
    .tab {
      text-align: center;
      margin-bottom: 25px;
    }

    .tab button {
      padding: 18px 32px;
      margin: 0 10px;
      font-size: 24px;
      font-weight: 600;
      border: none;
      border-radius: 14px;
      cursor: pointer;
      color: #fff;
      background: linear-gradient(135deg, #1E88E5, #90CAF9);
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
    }

    .tab button:hover {
      transform: translateY(-3px);
    }

    /* ================= ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏¢‡πà‡∏≠‡∏¢ ================= */
    .section-title,
    b {
      font-size: 24px;
      font-weight: 700;
      margin-top: 14px;
    }

    .form-title {
      font-size: 32px;
      font-weight: 700;
      text-align: center;
    }

    /* ================= ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å ================= */
    input,
    textarea,
    select {
      width: 100%;
      padding: 14px;
      font-size: 24px;
      border-radius: 14px;
      border: 1px solid #bbb;
      box-sizing: border-box;
    }

    /* ================= ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å / ‡∏û‡∏¥‡∏°‡∏û‡πå ================= */
    .save-btn,
    .print-btn {
      margin-top: 24px;
      padding: 18px 32px;
      font-size: 24px;
      font-weight: 600;
      border: none;
      border-radius: 14px;
      cursor: pointer;
      color: #fff;
      background: linear-gradient(135deg, #1E88E5, #90CAF9);
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
    }

    .print-btn {
      margin-left: 10px;
    }

    /* ================= GRID ================= */
    .health-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }

    .option-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* ================= HIDE ================= */
    .hide {
      display: none;
    }

    /* ================= PRINT (‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì) ================= */
    /* =================================================
   PRINT : MEDICAL CERTIFICATE A4 (ONE PAGE)
================================================= */
    @media print {

      /* ===== (1) ‡πÄ‡∏ß‡πâ‡∏ô 1 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2 ===== */
      #part2 .form-title {
        margin-top: 12px !important;
      }

      /* ===== (3) ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏´‡∏ô‡∏≤ +2px ===== */
      .form-title,
      .section-title,
      b,
      strong {
        font-size: 18px !important;
        /* ‡πÄ‡∏î‡∏¥‡∏° 16px */
        font-weight: 700 !important;
        margin: 6px 0 4px;
      }

      /* ===== (4) ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Å‡∏±‡∏ö radio ===== */
      .option-row {
        margin-top: 4px !important;
        gap: 14px !important;
      }

      /* ===== radio ‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ ===== */
      .option-row label {
        margin-right: 10px !important;
      }

      /* ===== (2) ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ ‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏ó‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥ ===== */
      .note div {
        font-size: 16px !important;
        /* ‡πÄ‡∏î‡∏¥‡∏° 12px */
        line-height: 1.25 !important;
      }

      /* ===== ‡∏ö‡∏µ‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏à‡∏ö 1 ‡∏´‡∏ô‡πâ‡∏≤ ===== */
      .q-row,
      .doctor-row,
      .line-group {
        margin-bottom: 6px !important;
      }

      label {
        margin-bottom: 2px !important;
      }

      input,
      textarea,
      select {
        margin-top: 0 !important;
        padding: 0 !important;
      }

      /* ===== ‡∏ö‡∏µ‡∏ö paragraph ===== */
      p {
        margin: 4px 0 !important;
      }

      /* ===== ‡∏ö‡∏µ‡∏ö div ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ===== */
      div {
        margin-top: 0 !important;
        margin-bottom: 0 !important;
      }

      @page {
        size: A4;
        margin: 15mm;
      }

      html,
      body {
        margin: 0;
        padding: 0;
        font-family: 'Sarabun', sans-serif !important;
        font-size: 16px;
        line-height: 1.25;
        color: #000;
        zoom: 0.85;
        /* ‚≠ê ‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏•‡∏á 1 ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô */
      }

      /* ===== ‡∏ã‡πà‡∏≠‡∏ô UI ===== */
      button,
      .tab,
      .save-btn,
      .print-btn,
      a {
        display: none !important;
      }

      /* ===== ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© ===== */
      .paper,
      form {
        max-width: 100% !important;
        box-shadow: none !important;
        border: none !important;
        padding: 0 !important;
        margin: 0 !important;
      }

      /* ===== ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏´‡∏•‡∏±‡∏Å ===== */
      h2 {
        font-size: 18px !important;
        font-weight: 700;
        text-align: center;
        margin: 0 0 8px 0;
      }

      /* ===== ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ===== */
      div,
      p,
      label,
      span {
        font-size: 16px !important;
        font-weight: 400 !important;
        margin: 0;
        padding: 0;
      }

      /* ===== input / textarea ===== */
      input,
      textarea,
      select {
        font-family: 'Sarabun', sans-serif !important;
        font-size: 16px !important;
        border: none !important;
        padding: 0 !important;
        margin: 0 !important;
        outline: none !important;
      }

      textarea {
        resize: none;
      }

      /* ===== grid ‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡∏ô ===== */
      .health-grid,
      .doctor-grid {
        gap: 10px !important;
      }

      /* ===== ‡∏´‡πâ‡∏≤‡∏°‡∏ï‡∏±‡∏î‡∏´‡∏ô‡πâ‡∏≤ ===== */
      #part1,
      #part2,
      .note {
        display: block !important;
        page-break-inside: avoid;
        break-inside: avoid;
      }

    }

    /* ================= ‡∏ã‡πà‡∏≠‡∏ô Header / Footer / UI ‡∏ô‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ================= */
    @media print {

      /* ‡∏ã‡πà‡∏≠‡∏ô header ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î */
      .header,
      .header * {
        display: none !important;
        visibility: hidden !important;
      }

      /* ‡∏ã‡πà‡∏≠‡∏ô footer ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á */
      .footer {
        display: none !important;
        visibility: hidden !important;
      }

      /* ‡∏Å‡∏±‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà header/footer ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏î‡∏±‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© */
      body {
        margin-top: 0 !important;
        margin-bottom: 0 !important;
      }

      /* ================= ‡∏ã‡πà‡∏≠‡∏ô URL + ‡πÄ‡∏•‡∏Ç‡∏´‡∏ô‡πâ‡∏≤ (Browser) ================= */
      @page {
        size: A4;
        margin: 15mm;

        /* Chrome / Edge */
        @bottom-left {
          content: none;
        }

        @bottom-right {
          content: none;
        }

        @top-left {
          content: none;
        }

        @top-right {
          content: none;
        }
      }
    }

    /* ================= FOOTER ================= */
    .footer {
      width: 100%;
      background: #dcdcdc;
      text-align: center;
      padding: 18px;
      font-size: 14px;
      color: #555;
      margin-top: 60px;
    }
  </style>
</head>

<body>
  <!-- ===== HEADER ===== -->
  <div class="header">
    <div class="header-left">
      <i class="fa-solid fa-stethoscope"></i>
      ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• CPF ‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô
    </div>

    <div class="header-right">
      {{ session.get('user_name', 'User') }} ({{ session.get('role', 'user') }}) | ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô Safety
      <a href="/logout" class="logout-btn">‡∏≠‡∏≠‡∏Å</a>
    </div>
  </div>

  <div class="container">

    <div class="paper">
      <h2>‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå</h2>

      <!-- ‚úÖ ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Å‡∏£‡∏≠‡∏ö -->
      <a href="/medical_certificate" class="save-btn">‚¨Ö ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</a>

      <div class="tab" id="menu">
        <button type="button" onclick="showPart(1)">‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏ú‡∏π‡πâ‡∏Ç‡∏≠‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á</button>
        <button type="button" onclick="showPart(2)">‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2 ‡πÅ‡∏û‡∏ó‡∏¢‡πå</button>
      </div>

      <!-- ========= PART 1 ========= -->
      <form id="part1">

        <div class="form-title">‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏ú‡∏π‡πâ‡∏Ç‡∏≠‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á</div>
        <div class="line"></div>

        <div class="q-row hide-print">
          <label class="label-bold">‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤</label>
          <select>
            <option>‡∏ô‡∏≤‡∏¢</option>
            <option>‡∏ô‡∏≤‡∏á</option>
            <option>‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß</option>
          </select>
        </div>

        <div class="q-row">
          <label class="label-bold">‡∏ä‡∏∑‡πà‡∏≠ - ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
          <input name="fullname" type="text">
        </div>

        <div class="q-row">
          <label class="label-bold">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label>
          <textarea name="address"></textarea>
        </div>

        <div class="q-row">
          <label class="label-bold">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</label>
          <input type="text" name="citizenId">
        </div>

        <div class="section-title">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</div>

        <div class="health-grid">

          <div class="line-group">
            1) ‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß
            <div class="option-row">
              <label><input type="radio" name="disease" value="‡πÑ‡∏°‡πà‡∏°‡∏µ"> ‡πÑ‡∏°‡πà‡∏°‡∏µ</label>
              <label><input type="radio" name="disease" value="‡∏°‡∏µ"> ‡∏°‡∏µ</label>
              <input type="text" name="disease_detail" placeholder="‡∏£‡∏∞‡∏ö‡∏∏">
            </div>
          </div>

          <div class="line-group">
            2) ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏ / ‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î
            <div class="option-row">
              <label><input type="radio" name="accident" value="‡πÑ‡∏°‡πà‡∏°‡∏µ"> ‡πÑ‡∏°‡πà‡∏°‡∏µ</label>
              <label><input type="radio" name="accident" value="‡∏°‡∏µ"> ‡∏°‡∏µ</label>
              <input type="text" name="accident_detail" placeholder="‡∏£‡∏∞‡∏ö‡∏∏">
            </div>
          </div>

          <div class="line-group">
            3) ‡πÄ‡∏Ñ‡∏¢‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•
            <div class="option-row">
              <label>
                <input type="radio" name="hospital_history" value="‡πÑ‡∏°‡πà‡∏°‡∏µ"> ‡πÑ‡∏°‡πà‡∏°‡∏µ
              </label>
              <label>
                <input type="radio" name="hospital_history" value="‡∏°‡∏µ"> ‡∏°‡∏µ
              </label>
              <input type="text" name="hospital_history_detail" placeholder="‡∏£‡∏∞‡∏ö‡∏∏">
            </div>
          </div>

          <div class="line-group">
            4) ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç
            <textarea name="other_history"></textarea>
          </div>

        </div>
        <div class="doctor-grid">

          <div class="doctor-col">
            <label class="section-title">‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á</label>
            <input type="text" name="signer">
          </div>

          <div class="doctor-col">
            <label class="section-title">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
            <input type="date" name="date">
          </div>

        </div>

        <button type="button" class="save-btn" id="savePart1">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1</button>
        <button type="button" class="print-btn" onclick="window.print()">üñ®Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå</button>

      </form>

      <!-- ========= PART 2 ========= -->
      <form id="part2" class="hide">

        <div class="form-title">‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2 ‡∏Ç‡∏≠‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå</div>

        <div class="doctor-grid">

          <!-- ===== ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ã‡πâ‡∏≤‡∏¢ ===== -->
          <div class="doctor-col">

            <div class="doctor-row">
              <label class="section-title">‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏û‡∏ó‡∏¢‡πå</label>
              <input name="doctor_name">
            </div>

            <div class="doctor-row">
              <label class="section-title">‡∏ï‡∏£‡∏ß‡∏à‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à</label>
              <input name="exam_detail">
            </div>

            <div class="doctor-row">
              <label class="section-title">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à</label>
              <input name="result" type="text" placeholder="‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å / ‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á / ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô / ‡∏ä‡∏µ‡∏û‡∏à‡∏£">
            </div>

          </div>

          <!-- ===== ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏Ç‡∏ß‡∏≤ ===== -->
          <div class="doctor-col">

            <div class="doctor-row">
              <label class="section-title">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡∏µ‡∏û</label>
              <input name="license">
            </div>

            <div class="doctor-row">
              <label class="section-title">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à</label>
              <!-- ‚úÖ ‡πÅ‡∏Å‡πâ‡∏à‡∏∏‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏à‡∏≤‡∏Å name="date" -> name="exam_date" -->
              <input type="date" name="exam_date">
            </div>

            <div class="doctor-row">
              <label class="section-title">‡∏™‡∏†‡∏≤‡∏û‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå</label>
              <input name="body_status">
            </div>

          </div>

        </div>

        <p style="text-indent: 2em; line-height: 1.4;">
          ‡∏Ç‡∏≠‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏ß‡πà‡∏≤ ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏î‡∏±‡∏á‡∏Å‡∏•‡πà‡∏≤‡∏ß ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏°‡∏µ‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏ó‡∏∏‡∏û‡∏û‡∏•‡∏†‡∏≤‡∏û‡∏à‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ
          ‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏Ñ‡∏à‡∏¥‡∏ï ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏¥‡∏ï‡∏ü‡∏±‡πà‡∏ô‡πÄ‡∏ü‡∏∑‡∏≠‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏≠‡πà‡∏≠‡∏ô
          ‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏¢‡∏≤‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÇ‡∏ó‡∏© ‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏Ñ‡∏û‡∏¥‡∏©‡∏™‡∏∏‡∏£‡∏≤‡πÄ‡∏£‡∏∑‡πâ‡∏≠‡∏£‡∏±‡∏á
          ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏Ñ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ
        </p>
        <div class="section-title">
          ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏Ñ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ
        </div>

        <div>(1) ‡πÇ‡∏£‡∏Ñ‡πÄ‡∏£‡∏∑‡πâ‡∏≠‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏á‡πÄ‡∏Å‡∏µ‡∏¢‡∏à‡πÅ‡∏Å‡πà‡∏™‡∏±‡∏á‡∏Ñ‡∏°</div>
        <div>(2) ‡∏ß‡∏±‡∏ì‡πÇ‡∏£‡∏Ñ‡πÉ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢</div>
        <div>(3) ‡πÇ‡∏£‡∏Ñ‡πÄ‡∏ó‡πâ‡∏≤‡∏ä‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏á‡πÄ‡∏Å‡∏µ‡∏¢‡∏à‡πÅ‡∏Å‡πà‡∏™‡∏±‡∏á‡∏Ñ‡∏°</div>
        <div>
          (4) ‡∏≠‡∏∑‡πà‡∏ô ‡πÜ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
          <input type="text" style="width:70%;" placeholder="‡∏£‡∏∞‡∏ö‡∏∏">
        </div>
        <br>

        <div style="margin-top:20px;">

          <div style="margin-bottom:12px;">
            <label class="section-title" style="display:inline-block; width:260px;">
              ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡πÅ‡∏û‡∏ó‡∏¢‡πå
            </label>

            <input name="opinion" type="text" style="width:58%;
             border:2px solid #555;
             border-radius:8px;
             padding:8px 12px;
             vertical-align:middle;">
          </div>

          <div>
            <label class="section-title" style="display:inline-block; width:260px;">
              ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢
            </label>

            <input name="doctorSign" type="text" style="width:45%;
             border:2px solid #555;
             border-radius:8px;
             padding:8px 12px;
             vertical-align:middle;">
          </div>

        </div>

        <div class="note">
          <div class="section-title">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</div>
          <div>(1) ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏ã‡∏∂‡πà‡∏á‡πÑ‡∏î‡πâ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡∏µ‡∏û‡πÄ‡∏ß‡∏ä‡∏Å‡∏£‡∏£‡∏°</div>
          <div>(2) ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏°‡∏µ‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÉ‡∏î ‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏â‡∏ö‡∏±‡∏ö‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ 1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢
          </div>
          <div>(3) ‡∏Ñ‡∏≥‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô</div>
          <div>
            ‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏°‡∏ï‡∏¥‡∏Ñ‡∏ì‡∏∞‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏ó‡∏¢‡∏™‡∏†‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 4/2561
            ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 19 ‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô 2561
          </div>
        </div>

        <button type="button" class="save-btn" id="savePart2">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2</button>
        <button type="button" class="print-btn" onclick="window.print()">üñ®Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå</button>

      </form>

    </div>

    <script>
      function clearForm() {
        document.querySelectorAll("input, textarea, select").forEach(el => {
          if (el.type === "radio" || el.type === "checkbox") {
            el.checked = false;
          } else {
            el.value = "";
          }
        });
      }

      // ================== ‡πÅ‡∏™‡∏î‡∏á‡∏™‡πà‡∏ß‡∏ô ==================
      function showPart(part) {
        document.getElementById("part1").classList.add("hide");
        document.getElementById("part2").classList.add("hide");
        document.getElementById("part" + part).classList.remove("hide");
      }

      // helper ‡∏Å‡∏±‡∏ô‡∏û‡∏±‡∏á‡πÄ‡∏ß‡∏•‡∏≤ name ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á
      function getVal(root, selectors, fallback = "") {
        for (const sel of selectors) {
          const el = root.querySelector(sel);
          if (el) return (el.value ?? "").toString();
        }
        return fallback;
      }
      function getRadio(root, name, fallback = "") {
        const el = root.querySelector(`[name="${name}"]:checked`);
        return el ? el.value : fallback;
      }

      // ================== ‚≠ê ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1 ==================
      document.getElementById("savePart1").addEventListener("click", function () {

        const p1 = document.getElementById("part1");

        const part1Data = {
          prefix: getVal(p1, ["select"]),
          fullname: getVal(p1, ['[name="fullname"]']),
          address: getVal(p1, ['[name="address"]', "textarea"]),
          citizenId: getVal(p1, ['[name="citizenId"]']),
          signer: getVal(p1, ['[name="signer"]']),
          date: getVal(p1, ['[name="date"]']),

          // ‚≠ê ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û
          disease: getRadio(p1, "disease", ""),
          accident: getRadio(p1, "accident", ""),
          hospital_history: getRadio(p1, "hospital_history", ""),
          other_history: getVal(p1, ['[name="other_history"]'])
        };

        localStorage.setItem("tempCertificate", JSON.stringify(part1Data));

        alert("‚úî ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1 ‡πÅ‡∏•‡πâ‡∏ß ‚Äî ‡πÑ‡∏õ‡∏Å‡∏£‡∏≠‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2 ‡∏ï‡πà‡∏≠");
        showPart(2);
      });

      // ================== ‚≠ê ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2 ==================
      document.getElementById("savePart2").addEventListener("click", function () {

        const temp = JSON.parse(localStorage.getItem("tempCertificate"));
        if (!temp) {
          alert("‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏Å‡πà‡∏≠‡∏ô");
          showPart(1);
          return;
        }

        const p2 = document.getElementById("part2");

        const part2Data = {
          doctor_name: getVal(p2, ['[name="doctor_name"]']),
          exam_detail: getVal(p2, ['[name="exam_detail"]']),
          result: getVal(p2, ['[name="result"]']),
          license: getVal(p2, ['[name="license"]']),

          // ‚úÖ ‡∏à‡∏∏‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡πÉ‡∏ä‡πâ exam_date (‡πÅ‡∏•‡∏∞‡∏°‡∏µ fallback ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏°)
          exam_date: getVal(p2, ['[name="exam_date"]', '[name="date"]']),

          body_status: getVal(p2, ['[name="body_status"]']),
          opinion: getVal(p2, ['[name="opinion"]']),
          doctor_sign: getVal(p2, ['[name="doctorSign"]'])
        };

        const finalRecord = {
          ...temp,
          ...part2Data,
          status: "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß (‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏û‡∏¥‡∏°‡∏û‡πå)",
          created_at: new Date().toISOString().slice(0, 10)
        };

        let records = JSON.parse(localStorage.getItem("certificateRecords")) || [];
        records.push(finalRecord);
        localStorage.setItem("certificateRecords", JSON.stringify(records));
        localStorage.removeItem("tempCertificate");

        alert("‚úî ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
        window.location.href = "/medical_certificate/register";
      });
    </script>

  </div>

  <!-- ===== FOOTER ===== -->
  <div class="footer">
    ¬© 2025 Safety Officer, CPF Khon Kaen Feedmill
  </div>

</body>

</html>